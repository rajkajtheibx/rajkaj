<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>जनप्रतिनिधि राजकाज | भारत के लोकतंत्र के कर्णधार</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <style>
    body { margin: 0; font-family: sans-serif; background: #f5f5f5; }
    .swiper { width: 100%; height: auto; }
    .swiper-slide img { width: 100%; height: auto; object-fit: cover; }
    .filters { padding: 1rem; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; background: white; }
    select { padding: 0.5rem; font-size: 1rem; min-width: 150px; }
    .grid-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; padding: 1rem; }
    .card {
      background: white; border-radius: 10px; padding: 1rem; width: 300px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: 0.3s;
    }
    .card img { width: 100%; border-radius: 8px; height: 200px; object-fit: cover; }
    .card h3 { margin: 0.5rem 0 0.2rem; font-size: 1.2rem; }
    .card p { margin: 0; font-size: 0.9rem; color: #555; }
    .links a { margin-right: 5px; font-size: 0.9rem; text-decoration: none; color: #007bff; }
    @media (max-width: 768px) {
      .grid-container { overflow-x: auto; flex-wrap: nowrap; }
      .card { flex: 0 0 80%; }
    }
  </style>
</head>
<body>

  <!-- Banner Slider -->
  <div class="swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
        <img src="https://firebasestorage.googleapis.com/v0/b/rajkajtheibx.firebasestorage.app/o/Banner%20Image.jpg?alt=media&token=3e5bab12-d249-418d-b7dd-4095fa7d6dc8" />
      </div>
      <div class="swiper-slide">
        <img src="https://firebasestorage.googleapis.com/v0/b/rajkajtheibx.firebasestorage.app/o/Banner%20Image%202%20.jpg?alt=media&token=8685ec16-300d-47f3-b48b-d8262ebfee8e" />
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <select id="stateFilter"><option value="">राज्य</option></select>
    <select id="districtFilter"><option value="">जिला</option></select>
    <select id="blockFilter"><option value="">ब्लॉक</option></select>
    <select id="designationFilter"><option value="">पद</option></select>
    <select id="periodFilter"><option value="">अवधि</option></select>
  </div>

  <!-- Cards Grid -->
  <div class="grid-container" id="cardsContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    const stateFilter = document.getElementById("stateFilter");
    const districtFilter = document.getElementById("districtFilter");
    const blockFilter = document.getElementById("blockFilter");
    const designationFilter = document.getElementById("designationFilter");
    const periodFilter = document.getElementById("periodFilter");
    const cardsContainer = document.getElementById("cardsContainer");

    const dataMap = [];

    fetch("sample-data.csv")
      .then(response => response.text())
      .then(csv => {
        const result = Papa.parse(csv, { header: true });
        dataMap.push(...result.data);
        populateFilters(dataMap);
        renderCards(dataMap);
      });

    function populateFilters(data) {
      const states = [...new Set(data.map(d => d.State))].sort();
      states.forEach(state => {
        const opt = document.createElement("option");
        opt.value = state; opt.text = state;
        stateFilter.appendChild(opt);
      });

      stateFilter.addEventListener("change", () => {
        const selectedState = stateFilter.value;
        const districts = [...new Set(data.filter(d => d.State === selectedState).map(d => d.District))].sort();
        districtFilter.innerHTML = '<option value="">जिला</option>';
        blockFilter.innerHTML = '<option value="">ब्लॉक</option>';
        districts.forEach(d => {
          const opt = document.createElement("option");
          opt.value = d; opt.text = d;
          districtFilter.appendChild(opt);
        });
        renderCards(data);
      });

      districtFilter.addEventListener("change", () => {
        const selectedState = stateFilter.value;
        const selectedDistrict = districtFilter.value;
        const blocks = [...new Set(data.filter(d => d.State === selectedState && d.District === selectedDistrict).map(d => d.Block))].sort();
        blockFilter.innerHTML = '<option value="">ब्लॉक</option>';
        blocks.forEach(b => {
          const opt = document.createElement("option");
          opt.value = b; opt.text = b;
          blockFilter.appendChild(opt);
        });
        renderCards(data);
      });

      blockFilter.addEventListener("change", () => renderCards(data));
      designationFilter.addEventListener("change", () => renderCards(data));
      periodFilter.addEventListener("change", () => renderCards(data));

      const designations = [...new Set(data.map(d => d.Designation))].sort();
      designations.forEach(des => {
        const opt = document.createElement("option");
        opt.value = des; opt.text = des;
        designationFilter.appendChild(opt);
      });

      const periods = [...new Set(data.map(d => d.Period))].sort();
      periods.forEach(per => {
        const opt = document.createElement("option");
        opt.value = per; opt.text = per;
        periodFilter.appendChild(opt);
      });
    }

    function renderCards(data) {
      const state = stateFilter.value;
      const district = districtFilter.value;
      const block = blockFilter.value;
      const designation = designationFilter.value;
      const period = periodFilter.value;

      const filtered = data.filter(d =>
        (!state || d.State === state) &&
        (!district || d.District === district) &&
        (!block || d.Block === block) &&
        (!designation || d.Designation === designation) &&
        (!period || d.Period === period)
      );

      cardsContainer.innerHTML = "";
      filtered.forEach(d => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${d.ImageURL || 'https://via.placeholder.com/300x200'}" alt="${d.Name}" />
          <h3>${d.Name}</h3>
          <p>${d.Designation || ''}</p>
          <p>${d.Village || ''}</p>
          <p>${d.Education || ''}</p>
          <div class="links">
            ${d.FBLink ? `<a href="${d.FBLink}" target="_blank">FB</a>` : ""}
            ${d.TwitterLink ? `<a href="${d.TwitterLink}" target="_blank">Twitter</a>` : ""}
            ${d.WhatsAppLink ? `<a href="${d.WhatsAppLink}" target="_blank">WA</a>` : ""}
            ${d.BlogLink ? `<a href="${d.BlogLink}" target="_blank">Blog</a>` : ""}
          </div>
        `;
        cardsContainer.appendChild(card);
      });
    }

    new Swiper('.swiper', {
      loop: true,
      autoplay: { delay: 4000 },
      pagination: { el: '.swiper-pagination', clickable: true },
    });
  </script>
</body>
</html>
